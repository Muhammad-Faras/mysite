{% extends 'base.html' %}

{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
{% endblock %}

{% block content %}

{% if messages %}
<div class="messages">
    <!-- {% for message in messages %} -->
        <!-- <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}"> -->
            <div class="bg-yellow-600 text-white px-4 py-2 ">
                {{ message }}
            </div>
        </div>
    <!-- {% endfor %} -->
</div>
{% endif %}

<section class="container mx-auto p-8 bg-gray-50 shadow-md rounded-lg mt-8">
    <div class="flex flex-col items-center md:flex-row md:space-x-10">
        <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg mb-6 md:mb-0">
            {% if user.profile.profile_img %}
                <img class="w-full h-full object-cover" src="{{ user.profile.profile_img.url }}" alt="Profile Image">
            {% else %}
                <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                    <i class="fa-solid fa-user text-gray-400 text-6xl"></i>
                </div>
            {% endif %}
        </div>
        <div class="text-center md:text-left">
            <h1 class="text-4xl font-semibold text-gray-800">{{ user.first_name }} {{ user.last_name }} ({{ user.username }})</h1>
            <p class="text-gray-500">{{ request.user }}</p>
            <div class="flex justify-center md:justify-start mt-4 space-x-4">
                <a href="{% url 'posts:my_posts' %}" class="text-blue-600 hover:underline">My Posts</a>
                <a href="{% url 'account_logout' %}" class="text-blue-600 hover:underline">Logout</a>
                <a href="{% url 'posts:wishlist' %}" class="text-blue-600 hover:underline">Wishlist</a>
                {% if user.has_usable_password %}
                    <a href="{% url 'accounts:account_change_password' %}" class="text-blue-600 hover:underline">Change Password</a>
                {% endif %}
            </div>
        </div>
    </div>

    <form action="" method="post" enctype="multipart/form-data" class="mt-8 max-w-2xl mx-auto">
        {% csrf_token %}
        <div class="bg-white p-6 rounded-lg shadow-lg space-y-6">
            <h2 class="text-2xl font-semibold text-gray-800">Personal Information</h2>
            <div class="grid grid-cols-1 lg:grid-cols-1 gap-6">
                <div class="flex flex-col w-full">
                    <label class="text-gray-600 mb-2" for="profile_img">Profile Picture</label>
                    {{ form.profile_img }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="university">University</label>
                    {{ form.university }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="skill">Skill</label>
                    {{ form.skill }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="gender">Gender</label>
                    {{ form.gender }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="age">Age</label>
                    {{ form.age }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="birthday">Date Of Birth</label>
                    {{ form.birthday }}
                </div>
                <div class="flex flex-col col-span-1 md:col-span-2">
                    <label class="text-gray-600 mb-2" for="bio">About</label>
                    {{ form.bio }}
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-lg mt-8 space-y-6">
            <h2 class="text-2xl font-semibold text-gray-800">Social Media Links</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="twitter_link">Twitter</label>
                    {{ form.twitter_link }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="facebook_link">Facebook</label>
                    {{ form.facebook_link }}
                </div>
                <div class="flex flex-col">
                    <label class="text-gray-600 mb-2" for="github_link">Github</label>
                    {{ form.github_link }}
                </div>
            </div>
        </div>

        <div class="mt-8 text-center">
            <button class="px-6 py-2 bg-blue-600 text-white rounded-lg shadow-lg hover:bg-blue-700 transition duration-300" type="submit" {% if user != request.user %} disabled {% endif %}>Save</button>
        </div>
    </form>
</section>

{% endblock %}
